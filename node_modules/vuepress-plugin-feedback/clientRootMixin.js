import Vue from "vue";

export default {
  updated() {
    // 等待dom加载完成之后执行
    this.update();
  },
  methods: {
    update() {
      import('../vue-feedback-component').then(module => {
        // 获取id为app的项
        const dom = document.querySelector('#app')
        // 判断一下，当前节点是不是已经插入了
        if (/feed-back/.test(dom.className)) {
          return;
        }
        // 创建copy组件
        const C = Vue.extend(module.default);
        const feedback = new C();
        // 下面这些是组件的props以及一些私有属性
        feedback.projectId = projectId
        feedback.good = good
        feedback.bad = bad
        feedback.titleText = titleText
        feedback.bottom = bottom
        feedback.right = right
        feedback.visiblity = visiblity
        feedback.btn = btn
        feedback._parent = dom;
        feedback.$mount();
        dom.className += ` feed-back`;
        dom.appendChild(feedback.$el);
      })
    }
  }
}
